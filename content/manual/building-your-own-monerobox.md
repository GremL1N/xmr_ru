---
title: "Как собрать собственный узел Monerobox на базе одноплатного компьютера Rock64"
categories:
  - "Руководства"
comments: false
authorbox: false
pager: true
toc: true
mathjax: true
sidebar: "right"
---

Monerobox — это оперативно подключаемый (plug-and-play) полноценный узел Monero с нулевой конфигурацией на базе одноплатного компьютера Rock64 и SSD. Пользователи могут следить за Monerobox посредством сетевого UI и использовать его в качестве удалённого узла для своих мобильных кошельков. Программное обеспечение (ПО) узла поддерживает автоматическое обновление сетевого UI и утилит, работающих в режиме командной строки.

Хотя вы и можете купить Monerobox непосредственно на сайте https://monerobox.store/, вы точно так же можете собрать свой собственный Monerobox, если хотите, чтобы его ПО было открытым.

## _Список необходимого аппаратного оборудования_

Вот список всего, что понадобится для создания аппаратной части вашего Monerobox:
- одноплатный компьютер Rock 64 (1 Гб, 2 Гб или 4 Гб), адаптер USB 3.0 / SATA, блок питания и теплоотвод (всё это можно найти на https://www.pine64.org);
- SSD 2,5 дюйма (можно купить на newegg, amazon и т. д.);
- корпус Monerobox понравившегося вам цвета (доступны 16 комбинаций) (можно выбрать на https://monerobox.store/product/monerobox-case/);
- карта micro SD (исключительно для хранения загрузчика в памяти SPI, чтобы Rock64 можно было загружать с SSD).

![1](/img/manuals/building-your-own-monerobox/01.jpeg)

## _Установка программного обеспечения_

Rock64 имеет встроенную флэш-память SPI с универсальным загрузчиком, позволяющим осуществлять загрузку с SSD через USB. Так как SSD обеспечивает более высокую скорость доступа, то резонно ожидать более высокой производительности системы при наличии в SSD образа операционной системы (ОС), откуда и будет загружаться система. Это немного рисковано, поскольку отказ загрузки SPI может заблокировать плату.

1. Загрузить файл u-boot-flash-spi-rock64.img.xz [отсюда](https://github.com/ayufan-rock64/linux-u-boot/releases/tag/2017.09-rockchip-ayufan-1035-gd646df03ac) и использовать [Etcher](https://www.balena.io/etcher/) для записи на SD-карту.​
2. Загрузить образ ОС [ayufan Linux для Rock64](https://github.com/ayufan-rock64/linux-build/releases) и использовать [Etcher](https://www.balena.io/etcher/) для записи на SSD.​
3. Вставить SD-карту в Rock64 и произвести загрузку. Память SPI будет загружена автоматически. Подождать, пока белый светодиод (LED) на Rock64 не начнёт мигать с частотой один раз в секунду. Подождать некоторое время, чтобы убедиться в том, что запись окончена, а затем извлечь SD-карту и выключить плату.​
4. Подсоединить сетевой кабель к Rock64 и SSD к порту USB 3.0 (синий порт), а затем загрузить Rock64. Синий LED на адаптере USB 3.0 / SATA должен загореться и не мигать. Подождать пару минут, если на адаптере замигает красный LED, это будет означать, что Rock64 получил доступ к памяти и успешно загрузился. Иногда, к сожалению, загрузка через USB 3.0 не удаётся. Если красный LED не замигает, следует перезагрузить Rock64. Если же после нескольких отказов компьютер не заработает, следует прочитать [эти инструкции](https://github.com/ayufan-rock64/linux-build/blob/master/recipes/flash-spi.md#4-fix-for-spi-flashing-failures) по устранению неисправности.​
5. Зайти в маршрутизатор (обычно IP будет 192.168.1.1) и найти IP-адрес хоста Rock64.

![2](/img/manuals/building-your-own-monerobox/02.png)

6. В Linux ayufan для Rock64 по умолчанию установлены имя пользователя rock64 и пароль rock64. Теперь необходимо установить SSH на Rock64, используя следующую команду:​
```
ssh rock64@192.168.1.117
```

Появится запрос принятия отпечатка пальца. Чтобы принять, следует ввести Yes (Да).

7. После успешной регистрации необходимо создать клон репозитория Monerobox и запустить установочный скрипт:​
```
git clone https://github.com/monero-ecosystem/monerobox.git
cd monerobox
sudo ./base_image.sh
```

8. Скрипт добавит APT репозиторий Monerobox и загрузит пакеты, необходимые для того, чтобы ваш Rock64 стал Monerobox. По окончании установки следует перегрузить созданный узел.​

9. Необходимо иметь доступ к сетевому UI Monerobox по http://monerobox.local через браузер ПК или ноутбука, если используется операционная система Ubuntu или MacOS. Если же в качестве операционной системы используется Windows, то понадобится IP-адрес http://192.168.1.117. Сетевой UI должен быть схож с тем, что показан на [демо странице](http://demo.monerobox.store/). Отличие будет состоять в том, что у вас появятся функции администратора.​

## _Сборка узла_

После установки ПО следует собрать узел.

1. Разместить SSD и адаптер на дне корпуса. Примечание: для более надёжного закрепления SSD на дне корпуса можно воспользоваться двусторонним скотчем, как показано здесь.

![3](/img/manuals/building-your-own-monerobox/03.jpeg)

2. Закрепить плату Rock64 на пластине при помощи четырёх чёрных винтов M2,5 x 6 мм, которые поставляются вместе с корпусом.

![4](/img/manuals/building-your-own-monerobox/04.jpeg)

3. Поместить пластину поверх SSD.

![5](/img/manuals/building-your-own-monerobox/05.jpeg)

4. Установить крышку корпуса при помощи четырёх винтов из нержавеющей стали M3 x 6 мм, которые поставляются вместе с корпусом.

![6](/img/manuals/building-your-own-monerobox/06.jpeg)

Синхронизация Rock64 2 Гб / 4 Гб с блокчейном «с нуля» обычно составляет примерно 30 часов, а в случае с Rock64 1 Гб процесс занимает до 40 часов и даже больше, так как скорость синхронизации также зависит от сети.

У Monerobox есть [Руководство пользователя](https://github.com/monero-ecosystem/monerobox/wiki/Monerobox-User-Manual), в котором подробно описаны функции контроля и администрирования посредством сетевого UI, а также процесс соединения с кошельками.
