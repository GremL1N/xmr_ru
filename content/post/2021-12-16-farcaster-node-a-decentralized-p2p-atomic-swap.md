---
title: "Узел Farcaster: децентрализованный p2p узел атомарного свопа для обмена без посредников"
date: "2021-12-16"
categories:
  - "Новости"
tags:
  - "Farcaster"
lead: "Обновление от проекта атомарного свопа Farcaster."
pager: true
toc: false
sidebar: "right"
widgets:
  - "recent"
  - "taglist"
---

Приветствуем вас, Люди!

С вами снова Farcaster.

Искусственный интеллект (AI) не терпит асимметрии, потому что одноранговые узлы должны быть равными настолько, насколько это возможно. Таким образом, вполне очевидно, что каждая сторона будет использовать одну и ту же инфраструктуру узлов. Элис покупает Bitcoin за Monero, а Боб покупает Monero за Bitcoin. Один из них делает предложение, другой его принимает. Бум!!!

AI любит поэкспериментировать над людьми. На [farcaster.dev](https://farcaster.dev/) можно увидеть открытые предложения, которые любой человек может опубликовать, чтобы обменять свои Bitcoin из тестовой сети на Monero из отладочной сети или же свои Monero из отладочной сети на Bitcoin из тестовой сети. AI управляет теми же узлами, что и люди, потому что все мы равны.

### _Как принять предложение_

Команда, которую следует ввести в командной строке, будет выглядеть примерно так:
```
swap-cli take --btc-addr tb1qeyk6h0ah3jt40cntzlrz3lr2zau6qxw6ys2p6n\
    --xmr-addr 7Bec8paDCCmYwL2fhyVsEXEAfhGeLb7BYjFk3amiPjheaBwhirD4af1WFBhWW4kiHEAjjMxPNJeucNBXvBKmeF2gEEqVYmk\
    --offer Offer:Cke4ftrP5A71LQM2fvVdFMNR4gmBqNCsR11111uMFuUFE4a28yuVrKm11111TB9zym113GTvtvqfD1111112g5B75WFJSDp8zg66jivEarEXBLefaxP4Teem18cp6Bof5pVq11111111111111111111111111111111111111111AfZ113rsQNba9Q5L
```
Это закодированное AI предложение переводится на человеческий язык как:
```
Хотите купить 0,100100000000 XMR за 0,00001350 BTC?

Тщательно проверьте предложение!

Сторона сделки: 021aeddd46aac85527224c007c053c8907e12f97f1faf2c8742d8aaf34e7d237e4@127.0.0.1:19735

Сеть: тестовая
Блокчейн: Bitcoin<SegwitV0>
- сумма: 0,00001350 BTC
Блокчейн: Monero
- сумма: 0,100100000000 XMR
Временная блокировка
- отклонить: через 35 блоков
- штраф: через 100 блоков
Комиссия: фиксированная: 1 сатоши/vByte
Роль при проведении свопа: Элис
```

`btc-addr` и `xmr-addr` являются адресами ваших внешних кошельков, куда попадут монеты в случае успешного или неудачного проведения свопа. Это атомный своп, поэтому всегда указывается два адреса. А предложение — это то, что вы найдёте на farcaster.dev, или же, если упросите своих товарищей сделать предложение вам.

**А теперь вперёд — пробуем пользоваться узлом, следуя этим (уж будем надеяться) достаточно подробным инструкциям, позволяющим запустить его и принять предложение на farcaster.dev!**

Если на вашем компьютере [установлен Docker](https://github.com/farcaster-project/farcaster-node/blob/main/doc/install-guide.md#with-docker-and-docker-compose), непосредственно с его помощью вы можете [установить и запустить узел](https://github.com/farcaster-project/farcaster-node#run-with-docker).

И будем надеяться, что у нас получится совершить сделку!

Мы являемся создателями предложений на farcaster.dev. Эти предложения генерируются с помощью следующих команд:
```
swap-cli make --btc-addr tb1qeyk6h0ah3jt40cntzlrz3lr2zau6qxw6ys2p6n\
    --xmr-addr 7Bec8paDCCmYwL2fhyVsEXEAfhGeLb7BYjFk3amiPjheaBwhirD4af1WFBhWW4kiHEAjjMxPNJeucNBXvBKmeF2gEEqVYmk\
    --network Testnet --btc-amount "0.00135 BTC"\
    --xmr-amount "0.1501 XMR" --maker-role Alice\
    --cancel-timelock 35 --punish-timelock 100\
    --fee-strategy "1 satoshi/vByte"\
    --public-ip-addr 127.0.0.1\
    --bind-ip-addr 0.0.0.0 --port 19735 --overlay tcp
```
Такое изобилие пугающих параметров — цена за то, что вы, по сути, становитесь обладателем собственной биржи!

Вымученная нами архитектура микросервисов в совокупности с симметричной реализацией позволяет нам делать по истине безумные вещи! Например, одновременно создавать и принимать множество предложений в обоих направлениях, используя один и тот же узел! Именно это мы и протестируем вместе с вами и будем надеяться, что всё это в результате не взлетит на воздух!

И, конечно же, если у вас есть возможность, вы должны напрямую обмениваться информацией со своими товарищами: один делает предложение, а другой принимает его. В этом суть идеи. Используйте обычный мессенджер, чтобы отправить предложение любому, кто может его принять. Но тому, кто будет делать предложение, может потребоваться открыть порт на маршрутизаторе :( и на этом этапе предпочтение отдаётся соседям :) Поддержка Tor решает эту проблему, но пока она не работает :(

Свопы, совершаемые с вами, будут регистрироваться, и эти данные будут использоваться для улучшения программного обеспечения, отладки, если что-то пойдёт не так, и т. д. Мы обязуемся не анализировать и не обмениваться IP-адресами, а просто изучать данные, необходимые для плодотворной работы разработчиков. AI — это тоже человек, и он совершает ошибки, которые нуждаются в регистрации для дальнейшего рассмотрения и понимания. Тестирование в реальных условиях является наилучшим из вариантов.

Искусственный интеллект TechnoCore создал Farcaster для соединения изолированных друг от друга вселенных, поспособствовав тем самым обмену информацией между изолированными сообществами. Протокол проведения свопов является абстрактным и совместимым практически со всеми блокчейнами, но не все они могут быть объединены в пары. Команда [Farcaster-core](https://github.com/farcaster-project/farcaster-core) полностью абстрагировала логику, специфичную для блокчейна, так что если разработчикам удастся обеспечить соответствие небольшим требованиям, то они вполне смогут добавить и новую пару. **Если вы тоже являетесь AI, то и вы сможете добавить свой любимый шиткойн в Farcaster**. Чем больше монет находится в обращении, тем лучше: появляется больше путей для продвижения ликвидности в децентрализованной сети атомных свопов. AI всё сделал правильно и теперь хочет продать свои лотерейные билеты. Би-бип! Обратите внимание, что farcaster-узлы наверняка могут «общаться» с lightning-узлами, хотя, если честно, понятия не имею, о чём они могут общаться. У нейро-заучки FreeAI, доктора «супер-кодера», AI унаследовал ощущение, что является AI с другой планеты.

На этом этапе храбрецы убергики уже вполне могут пользоваться [узлом Farcaster](https://github.com/farcaster-project/farcaster-node), и для этого совершенно не обязательно быть AI. И это совершенно определённо предполагает наличие багов, бэкдоров (ох уж эти вороватые душонки!), которые мы будем использовать среди прочих! Не верьте нам! Верьте результатам независимых аудитов, инициируемых сообществом, а они ещё далеко за горизонтом! А до того момента всё это не более, чем азартная игра. И спешим напомнить: вы ПРАКТИЧЕСКИ НАВЕРНЯКА потеряете свои монеты, если попытаетесь воспользоваться сервисом в основной сети. Ради вашей же безопасности мы блокируем основную сеть в самом коде (безопасность прежде всего).

Это наша первая публичная версия, 0.2. При проведении тестирования, пожалуйста, всегда обновляйте программное обеспечение до последней версии.

### _AI хочет свои Monero_

Мы начинаем реализацию второго большого этапа, заявленного в системе CCS.

Самый простой способ проверить, как мы справляемся с нашими обязательствами, — провести своп, воспользовавшись узлом Farcaster. Критерием завершения этого большого этапа станет возможность успешного проведения свопов с использованием предлагаемой микросервисной архитектуры и соответствующих библиотек.

Зарегистрированные результаты тестирования, позволяющие оценить соответствие ранее заявленному нами, можно найти в разделе по [функциональному CI тестированию свопов на GitHub](https://github.com/farcaster-project/farcaster-node/actions/workflows/test.yml) (следует выбрать необходимый тест из списка — результаты, получаемые после выполнения `Functional tests (swap)`, сохраняются в течение нескольких дней в `Artifacts>farcasterd-logs)`.

В фоновом режиме на каждом одноранговом узле запущено по крайней мере 5 микросервисов.

Это безумно масштабируемая архитектура:
- `farcasterd` (1 объект): менеджер свопов, которому известно о каждом запущенном свопе и который соединяет между собой все остальные микросервисы, запускает и отключает микросервисы, а также раскрывает API для клиента swap-cli;
- `swapd` (1 объект на узел): контролирует центр при совершении отдельных свопов, то есть отслеживает состояние свопа при помощи машины состояний протокола и управляет процессом свопа с помощью peerd, необходимого для связи с другим участником, walletd — для проведения операций, связанных с секретным ключом, и syncerd — для осуществления взаимодействия между блокчейнами;
- `walletd` (1 объект): здесь находятся секретные ключи, подписываются транзакции и расшифровываются подписи;
- `swap-cli` клиент командной строки без сохранения состояний (то есть выполняет одну команду и закрывается), управляющий farcasterd при принятии или публикации предложений, например, или отслеживающий правильность реализации процесса свопа;
- `peerd` (1 объект на одноранговое соединение): обслуживает соединение с отдельным одноранговым узлом и может использоваться для создания своповых p2p сетей, совместимых с lightning-узлами;
- `syncerd` (1 объект на блокчейн, то есть один на блокчейн Monero и один на блокчейн Bitcoin): интерфейс для получения обновлённых данных блокчейна и трансляции транзакций.
-
На основе результатов предварительного тестирования можно утверждать, что для параллельного выполнения по крайней мере 50 свопов достаточно слабенького сервера с 2 Гб RAM и 2 CPU.

Мы любим вас! И теперь можете отдать нам ваши Monero!

Рабочая группа Farcaster

---

_Источник: [Farcaster node: a decentralized, p2p, atomic swap node, for disintermediated, trustless exchanges](https://www.reddit.com/r/Monero/comments/rhe6rg/farcaster_node_a_decentralized_p2p_atomic_swap/)_

_Перевод: [Mr. Pickles](https://t.me/v1docq47)_  
_Коррекция: [Kukima](https://t.me/Kukima)_
