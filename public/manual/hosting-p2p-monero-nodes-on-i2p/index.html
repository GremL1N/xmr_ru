<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Хостинг p2p узла Monero в I2P - </title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Хостинг p2p узла Monero в I2P" />
<meta property="og:description" content="Настоящий документ является кратким руководством для тех операторов новых и/или существующих узлов Monero, которые хотят поддержать пользователей I2P, позволив их узлам передавать p2p данные через I2P.
После того как вы прочитаете этот документ, вы сможете создать I2P узел примерно за 20 минут.
Требования  система Linux, которая может быть защищена firewall (то есть домашняя сеть); последняя версия Monero (CLI), ссылка; последняя версия I2P-Zero (на момент написания — v1.12), ссылка.  I2P-Zero I2P-Zero (также называется i2pz) — это небольшой футпринт I2P маршрутизатора." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/manual/hosting-p2p-monero-nodes-on-i2p/" /><meta property="article:section" content="manual" />




		<meta itemprop="name" content="Хостинг p2p узла Monero в I2P">
<meta itemprop="description" content="Настоящий документ является кратким руководством для тех операторов новых и/или существующих узлов Monero, которые хотят поддержать пользователей I2P, позволив их узлам передавать p2p данные через I2P.
После того как вы прочитаете этот документ, вы сможете создать I2P узел примерно за 20 минут.
Требования  система Linux, которая может быть защищена firewall (то есть домашняя сеть); последняя версия Monero (CLI), ссылка; последняя версия I2P-Zero (на момент написания — v1.12), ссылка.  I2P-Zero I2P-Zero (также называется i2pz) — это небольшой футпринт I2P маршрутизатора.">

<meta itemprop="wordCount" content="637">
<meta itemprop="keywords" content="" />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Хостинг p2p узла Monero в I2P"/>
<meta name="twitter:description" content="Настоящий документ является кратким руководством для тех операторов новых и/или существующих узлов Monero, которые хотят поддержать пользователей I2P, позволив их узлам передавать p2p данные через I2P.
После того как вы прочитаете этот документ, вы сможете создать I2P узел примерно за 20 минут.
Требования  система Linux, которая может быть защищена firewall (то есть домашняя сеть); последняя версия Monero (CLI), ссылка; последняя версия I2P-Zero (на момент написания — v1.12), ссылка.  I2P-Zero I2P-Zero (также называется i2pz) — это небольшой футпринт I2P маршрутизатора."/>

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/logo.png">
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Меню</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">Что такое Monero (XMR)?</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/news/">
				
				<span class="menu__text">Новости</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/articles/">
				
				<span class="menu__text">Статьи</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/library/">
				
				<span class="menu__text">Библиотека</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/manuals/">
				
				<span class="menu__text">Руководства и инструкции</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/services/">
				
				<span class="menu__text">Полезные ссылки и сервисы</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Хостинг p2p узла Monero в I2P</h1>
			<div class="post__meta meta"><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B0/" rel="category">Руководства</a>
	</span>
</div></div>
		</header>
		
<div class="post__toc toc">
	<div class="toc__title">Содержимое страницы</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
  <ul>
    <li><a href="#_требования_"><em>Требования</em></a></li>
    <li><a href="#_i2p-zero_"><em>I2P-Zero</em></a></li>
    <li><a href="#_установка-i2p-zero_"><em>Установка I2P-Zero</em></a>
      <ul>
        <li><a href="#i2p-zero-systemd">I2P-Zero systemd</a></li>
        <li><a href="#_конфигурирование-i2p-zero-создание-сервера_"><em>Конфигурирование I2P-Zero: создание сервера</em></a></li>
        <li><a href="#_конфигурирование-i2p-zero-создание-туннеля-socks_"><em>Конфигурирование I2P-Zero: создание туннеля SOCKS</em></a></li>
      </ul>
    </li>
    <li><a href="#_запуск-monerod_"><em>Запуск monerod</em></a>
      <ul>
        <li><a href="#_monero-daemon-systemd_"><em>Monero Daemon systemd</em></a></li>
      </ul>
    </li>
    <li><a href="#_заключение_"><em>Заключение</em></a></li>
  </ul>
</nav>
	</div>
</div><div class="content post__content clearfix">
			<p>Настоящий документ является кратким руководством для тех операторов новых и/или существующих узлов Monero, которые хотят поддержать пользователей I2P, позволив их узлам передавать p2p данные через I2P.</p>
<p>После того как вы прочитаете этот документ, вы сможете создать I2P узел примерно за 20 минут.</p>
<h2 id="_требования_"><em>Требования</em></h2>
<ul>
<li>система Linux, которая может быть защищена firewall (то есть домашняя сеть);</li>
<li>последняя версия Monero (CLI), <a href="https://downloads.getmonero.org/cli/linux64">ссылка</a>;</li>
<li>последняя версия I2P-Zero (на момент написания — v1.12), <a href="https://github.com/i2p-zero/i2p-zero/releases">ссылка</a>.</li>
</ul>
<h2 id="_i2p-zero_"><em>I2P-Zero</em></h2>
<p>I2P-Zero (также называется i2pz) — это небольшой футпринт I2P маршрутизатора. Эта программа сократилась до встраиваемой среды выполнения Java и не имеет зависимостей как таковых.</p>
<p>У неё есть контрольный порт 8051, который можно использовать для создания службы (служб) I2P. Это простой текстовый протокол. Для взаимодействия следует использовать tunnel-control.sh или, как вариант, просто использовать: netcat: echo -e &ldquo;version&rdquo; | nc 127.0.0.1 8051.</p>
<p>I2P-Zero имеет GUI, но не будет использовать его, так как, наиболее вероятно, вы будете устанавливать программу на сервер.</p>
<p>Если кратко, I2P-Zero позволяет:</p>
<ul>
<li>Разместить eepsite (веб-сайт I2P).</li>
<li>Разместить любую службу в сети I2P (например, направить локальный DNS-сервер на 127.0.0.1:53, чтобы обеспечить к нему доступ по I2P).</li>
<li>Создать локальный прокси-сервер SOCKS, который можно будет использовать для направления трафика в туннель.</li>
</ul>
<p>Наша цель состоит в размещении полного рабочего узла через I2P, поэтому нам необходимо конфигурировать как входящий, так и исходящий I2P трафик:</p>
<ul>
<li>для размещения monerod через I2P нам понадобится воспользоваться опцией 2;</li>
<li>для перенаправления трафика через I2P нам понадобится воспользоваться опцией 3.</li>
</ul>
<h2 id="_установка-i2p-zero_"><em>Установка I2P-Zero</em></h2>
<ul>
<li>Распаковать и переместить в i2p-zero-linux.vX.XX/router/bin.</li>
<li>Запустить процесс I2P-Zero: ./launch.sh.</li>
<li>???</li>
<li>w00t!!</li>
</ul>
<p>Убедиться в том, что программа использует netstat -tulpn | grep &lsquo;8051&rsquo; (мы производим обработку, используя grep, для контрольного порта).</p>
<h3 id="i2p-zero-systemd">I2P-Zero systemd</h3>
<p>Для /etc/systemd/system/i2pzero.service существует скрипт запуска systemd:</p>
<pre tabindex="0"><code>[Unit]
Description=i2pzero

[Service]
Type=simple
ExecStart=/bin/bash /home/i2pz/i2p-zero-linux.v1.10/router/bin/launch.sh
User=i2pz
Group=i2pz

[Install]
WantedBy=multi-user.target
</code></pre><p>Изменить пути по желанию, перезагрузить <code>systemd: systemctl daemon-reload</code>, после чего можно выполнить <code>service i2pzero start</code>.</p>
<p>Убедиться в том, что всё работает: <code>netstat -tulpn | grep '8051'</code>.</p>
<h3 id="_конфигурирование-i2p-zero-создание-сервера_"><em>Конфигурирование I2P-Zero: создание сервера</em></h3>
<p>Сначала нам необходимо зарегистрировать I2P службу/сервер:</p>
<pre tabindex="0"><code>./tunnel-control.sh server.create 127.0.0.1 48083
</code></pre><p>на выходе вы получите I2P адрес b32, например:</p>
<pre tabindex="0"><code>suspiciouslyrandomandverylongstring.b32.i2p
</code></pre><p>Это будет адрес вашего I2P сервера/службы, который будет использоваться для входящих соединений.</p>
<h3 id="_конфигурирование-i2p-zero-создание-туннеля-socks_"><em>Конфигурирование I2P-Zero: создание туннеля SOCKS</em></h3>
<p>Чтобы наш узел мог ретранслировать входящие транзакции по I2P, нам необходимо создать выходящие соединения по I2P. Чтобы направить трафик в I2P, нам понадобится создать туннель SOCKS. I2P-Zero позволяет сделать это.</p>
<p>Для создания туннеля SOCKS выполняется следующая команда:</p>
<pre tabindex="0"><code>./tunnel-control.sh socks.create 48085
</code></pre><p>I2P-Zero подтвердит создание этого туннеля простым OK.</p>
<p>Для мониторинга туннеля используется</p>
<pre tabindex="0"><code>./tunnel-control.sh all.list | python -m json.tool.
</code></pre><h2 id="_запуск-monerod_"><em>Запуск monerod</em></h2>
<p>Пришло время запустить monerod. Нам необходимо включить следующий флаг: <code>--anonymous-inbound</code> (<a href="https://github.com/monero-project/monero/blob/master/ANONYMITY_NETWORKS.md#inbound-connections">документация</a>), чтобы monerod знал «публичный» адрес и порт нашего I2P сервера.</p>
<p>Формат будет следующим:</p>
<pre tabindex="0"><code>--anonymous-inbound &lt;address&gt;,127.0.0.1:&lt;M&gt;
</code></pre><p>где <code>M</code> будет свободным локальным портом, а адресом — ваш адрес <em>b32.i2p</em>.</p>
<p>Ранее нашему I2P серверу нами был назначен порт 48083. Наш флаг становится следующим:</p>
<pre tabindex="0"><code>--anonymous-inbound &quot;suspiciouslyrandomandverylongstring.b32.i2p,127.0.0.1:48083&quot;[HTML]
</code></pre><p>Другим флагом, который необходимо включить, будет &ndash;proxy (документация). Если не включить этот флаг, ваш узел не сможет ретранслировать транзакции в сеть I2P. Данный флаг должен включаться всегда.</p>
<pre tabindex="0"><code>--proxy i2p,127.0.0.1:48085
</code></pre><p>Последним необходимым флагом является <code>--add-peer</code>, который указывает на существующий сид-узел I2P (также называемый mipseed), к которому можно подсоединиться. Без этой команды вы не сможете ретранслировать транзакции, так как вы не будете подсоединены к какому-либо узлу.</p>
<pre tabindex="0"><code>--add-peer &quot;dsc7fyzzultm7y6pmx2avu6tze3usc7d27nkbzs5qwuujplxcmzq.b32.i2p&quot;
</code></pre><h3 id="_monero-daemon-systemd_"><em>Monero Daemon systemd</em></h3>
<p>Для <code>/etc/systemd/system/monerod.service</code> существует скрипт запуска systemd:</p>
<pre tabindex="0"><code>[Unit]
Description=monerod
After=network.target

[Service]
Type=forking
PIDFile=/home/monero/monerod.pid
ExecStart=/home/monero/monero-x86_64-linux-gnu.0.14.1.0/monerod --anonymous-inbound &quot;suspiciouslyrandomandverylongstring.b32.i2p,127.0.0.1:48083&quot; --restricted-rpc --detach --pidfile /home/monero/monerod.pid
User=monero
Group=monero

[Install]
WantedBy=multi-user.target
</code></pre><p>Вы можете изменить его по собственному усмотрению.</p>
<h2 id="_заключение_"><em>Заключение</em></h2>
<p>Подытожим. Вышеуказанные 3 флага (<code>--anonymous-inbound</code>, <code>--proxy</code>, <code>--add-peer</code>) необходимы для того, чтобы программа I2P-Zero обеспечила возможность размещения узла Monero.</p>
<p>Для понимания я опубликую полную команду monerod, которую лично я использую со своим публичным узлом RPC Monero на сервере:</p>
<pre tabindex="0"><code>./monerod
 --max-concurrency 4 \
 --rpc-bind-ip YOUR.IP \
 --rpc-bind-port 18089 \
 --restricted-rpc \
 --public-node \
 --anonymous-inbound &quot;suspiciouslyrandomandverylongstring.b32.i2p,127.0.0.1:48083&quot; \
 --proxy i2p,127.0.0.1:48085 \
 --add-peer &quot;dsc7fyzzultm7y6pmx2avu6tze3usc7d27nkbzs5qwuujplxcmzq.b32.i2p&quot; \
 --confirm-external-bind
</code></pre><p>Что ещё можно прочитать по теме:</p>
<ul>
<li><a href="https://github.com/i2p-zero/i2p-zero">страница проекта I2P-Zero</a>;</li>
<li><a href="https://ccs.getmonero.org/proposals/vtnerd-tor-tx-broadcasting.html">Трансляция транзакций через скрытую службу Tor, предложение в CCS</a> (опубликовано vtnerd).</li>
</ul>

		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/manual/monero_merchant_faq/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Назад</span>
			<p class="pager__title">Часто задаваемые вопросы (FAQ) об организации приёма платежей в Monero</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/manual/how-to-run-monero-node-with-tor-onion/" rel="next">
			<span class="pager__subtitle">Вперед&thinsp;»</span>
			<p class="pager__title">Создание общедоступного узла Monero с поддержкой Tor Onion</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Недавние публикации</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/post/2021-12-06-vulnerability-multisig/">В коде multisig-кошелька Monero обнаружена ошибка</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-12-04-monero-gui-0.17.3.0-released/">Доработанная версия Monero GUI 0.17.3.0 Oxygen Orion</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-12-04-monero-0.17.3.0-released/">Доработанная промежуточная версия Monero 0.17.3.0 Oxygen Orion</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-11-19-kraken-delist-monero-for-uk-customers/">Kraken планирует исключить Monero из списка поддерживаемых в Великобритании валют уже к концу ноября</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-11-05-p2pool-1.3.1-released/">Релиз P2Pool v1.3.1</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Категории</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB-%D0%B2%D1%81%D1%82%D1%80%D0%B5%D1%87%D0%B8/">Журнал встречи</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D0%BD%D0%BE%D0%B2%D0%BE%D1%81%D1%82%D0%B8/">Новости</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B0/">Руководства</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8/">Статьи</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Теги</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/breaking-monero/" title="Breaking Monero">Breaking Monero</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/cake-wallet/" title="Cake Wallet">Cake Wallet</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/ccs/" title="CCS">CCS</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/cdc-36c3/" title="CDC 36c3">CDC 36c3</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/ciphertrace/" title="CipherTrace">CipherTrace</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/def-con-2021/" title="DEF CON 2021">DEF CON 2021</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/farcaster/" title="Farcaster">Farcaster</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/feather-wallet/" title="Feather Wallet">Feather Wallet</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/haveno/" title="Haveno">Haveno</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/konferenco/" title="Konferenco">Konferenco</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/monero-gui/" title="Monero GUI">Monero GUI</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/monero-outreach/" title="Monero Outreach">Monero Outreach</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/monerujo/" title="Monerujo">Monerujo</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/mpwg/" title="MPWG">MPWG</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/p2pool/" title="P2Pool">P2Pool</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B0%D1%82%D0%BE%D0%BC%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D1%81%D0%B2%D0%BE%D0%BF%D1%8B/" title="Атомарные свопы">Атомарные свопы</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B2%D0%B7%D0%BB%D0%BE%D0%BC/" title="Взлом">Взлом</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B2%D0%B8%D1%80%D1%83%D1%81/" title="Вирус">Вирус</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB-%D0%B2%D1%81%D1%82%D1%80%D0%B5%D1%87%D0%B8/" title="Журнал встречи">Журнал встречи</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%BD%D0%B0%D1%83%D1%87%D0%BD%D0%BE-%D1%84%D0%B0%D0%BD%D1%82%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9-%D1%80%D0%B0%D1%81%D1%81%D0%BA%D0%B0%D0%B7/" title="Научно-фантастический рассказ">Научно-фантастический рассказ</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0/" title="Ошибка">Ошибка</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 .
			<span class="footer__copyright-credits">Информационно-новостной сайт русскоязычного сообщества Monero. <a href="/services/#_поддержать-xmrru_" rel="nofollow noopener" target="_blank">Пожертвовать</a>  на развитие проекта XMR.RU.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="/js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>