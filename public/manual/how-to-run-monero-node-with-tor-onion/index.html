<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Создание общедоступного узла Monero с поддержкой Tor Onion - </title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Создание общедоступного узла Monero с поддержкой Tor Onion" />
<meta property="og:description" content="Это большой вклад в работу сети Monero, предполагающий довольно сложные настройки. Если вы новичок, то вам это не нужно.
Конечная цель: Вы будете публично предлагать следующие услуги, где xxx.yyy.zzz.vvv будет IP-адресом вашего сервера.
* xxx.yyy.zzz.vvv:18080 - клирнет P2P сервис (для других узлов) * xxx.yyy.zzz.vvv:18081 - клирнет RPC сервис (для кошельков) * yourlongv3onionaddress.onion:18083 - «луковый» P2P сервис (для других «луковых» узлов) * yourlongv3onionaddress.onion:18081 - «луковый» RPC сервис (для кошельков, подключающихся через Tor) Почему используются разные P2P порты для клирнет и «луковых» сервисов?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/manual/how-to-run-monero-node-with-tor-onion/" /><meta property="article:section" content="manual" />




		<meta itemprop="name" content="Создание общедоступного узла Monero с поддержкой Tor Onion">
<meta itemprop="description" content="Это большой вклад в работу сети Monero, предполагающий довольно сложные настройки. Если вы новичок, то вам это не нужно.
Конечная цель: Вы будете публично предлагать следующие услуги, где xxx.yyy.zzz.vvv будет IP-адресом вашего сервера.
* xxx.yyy.zzz.vvv:18080 - клирнет P2P сервис (для других узлов) * xxx.yyy.zzz.vvv:18081 - клирнет RPC сервис (для кошельков) * yourlongv3onionaddress.onion:18083 - «луковый» P2P сервис (для других «луковых» узлов) * yourlongv3onionaddress.onion:18081 - «луковый» RPC сервис (для кошельков, подключающихся через Tor) Почему используются разные P2P порты для клирнет и «луковых» сервисов?">

<meta itemprop="wordCount" content="1605">
<meta itemprop="keywords" content="" />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Создание общедоступного узла Monero с поддержкой Tor Onion"/>
<meta name="twitter:description" content="Это большой вклад в работу сети Monero, предполагающий довольно сложные настройки. Если вы новичок, то вам это не нужно.
Конечная цель: Вы будете публично предлагать следующие услуги, где xxx.yyy.zzz.vvv будет IP-адресом вашего сервера.
* xxx.yyy.zzz.vvv:18080 - клирнет P2P сервис (для других узлов) * xxx.yyy.zzz.vvv:18081 - клирнет RPC сервис (для кошельков) * yourlongv3onionaddress.onion:18083 - «луковый» P2P сервис (для других «луковых» узлов) * yourlongv3onionaddress.onion:18081 - «луковый» RPC сервис (для кошельков, подключающихся через Tor) Почему используются разные P2P порты для клирнет и «луковых» сервисов?"/>

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/logo.png">
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Меню</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">Что такое Monero (XMR)?</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/news/">
				
				<span class="menu__text">Новости</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/articles/">
				
				<span class="menu__text">Статьи</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/library/">
				
				<span class="menu__text">Библиотека</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/manuals/">
				
				<span class="menu__text">Руководства и инструкции</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/services/">
				
				<span class="menu__text">Полезные ссылки и сервисы</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Создание общедоступного узла Monero с поддержкой Tor Onion</h1>
			<div class="post__meta meta"><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B0/" rel="category">Руководства</a>
	</span>
</div></div>
		</header>
		
<div class="post__toc toc">
	<div class="toc__title">Содержимое страницы</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
  <ul>
    <li><a href="#_зачем-использовать-именно-эти-настройки_"><em>Зачем использовать именно эти настройки?​</em></a></li>
    <li><a href="#_возможные-предпосылки-для-создания-узла_"><em>Возможные предпосылки для создания узла​</em></a></li>
    <li><a href="#_установка-tor_"><em>Установка Tor​</em></a>
      <ul>
        <li><a href="#_etctortorrc_"><em>/etc/tor/torrc</em></a></li>
      </ul>
    </li>
    <li><a href="#_установка-monero_"><em>Установка Monero​</em></a>
      <ul>
        <li><a href="#_etcmoneroconf_"><em>/etc/monero.conf​</em></a></li>
        <li><a href="#_etcmoneroservice_"><em>/etc/&hellip;/monero.service</em></a></li>
      </ul>
    </li>
    <li><a href="#_открытие-портов-брандмауэра_"><em>Открытие портов брандмауэра​</em></a></li>
    <li><a href="#_тестирование_"><em>Тестирование​</em></a>
      <ul>
        <li><a href="#_на-сервере_"><em>На сервере​</em></a></li>
        <li><a href="#_на-клиентской-машине_"><em>На клиентской машине​</em></a></li>
      </ul>
    </li>
    <li><a href="#_отладка_"><em>Отладка​</em></a>
      <ul>
        <li><a href="#_tor_"><em>Tor</em></a></li>
        <li><a href="#_monero_"><em>Monero:</em></a></li>
      </ul>
    </li>
    <li><a href="#_дальнейшие-улучшения_"><em>Дальнейшие улучшения​</em></a>
      <ul>
        <li><a href="#_периодические-перезапуски_"><em>Периодические перезапуски</em></a></li>
      </ul>
    </li>
  </ul>
</nav>
	</div>
</div><div class="content post__content clearfix">
			<p>Это большой вклад в работу сети Monero, предполагающий довольно сложные настройки. Если вы новичок, то вам это не нужно.</p>
<p>Конечная цель: Вы будете публично предлагать следующие услуги, где xxx.yyy.zzz.vvv будет IP-адресом вашего сервера.</p>
<pre tabindex="0"><code>* xxx.yyy.zzz.vvv:18080 - клирнет P2P сервис (для других узлов)
* xxx.yyy.zzz.vvv:18081 - клирнет RPC сервис (для кошельков)
* yourlongv3onionaddress.onion:18083 - «луковый» P2P сервис (для других «луковых» узлов)
* yourlongv3onionaddress.onion:18081 - «луковый» RPC сервис (для кошельков, подключающихся через Tor)
</code></pre><p>Почему используются разные P2P порты для клирнет и «луковых» сервисов? Это требование monerod.</p>
<blockquote>
<p><em><strong>Зачем использовать именно эти настройки?​</strong></em></p>
<p>Как и в случае с любой службой широковещательной передачи или ретрансляции публичных данных, «плохой трафик» или в нашем случае «плохие транзакции» с точки зрения внешнего наблюдателя могут передаваться с IP-адреса вашего сервера, даже если на самом деле их источником пользователь удалённого кошелька. Это потенциальный риск, о котором следует помнить.</p>
</blockquote>
<h2 id="_зачем-использовать-именно-эти-настройки_"><em>Зачем использовать именно эти настройки?​</em></h2>
<p>Вы сможете безопасно и анонимно подключить свой десктоп и мобильные кошельки Monero к своему доверенному узлу Monero через Tor. Ваш узел всегда будет готов к использованию без каких-либо задержек (он будет всегда синхронизирован, в отличие от периодически работающего узла на ноутбуке).</p>
<ul>
<li><strong>Обслуживание блоков и транзакций</strong> в P2P сети Monero поможет новым пользователям загрузить и синхронизировать свои узлы. Это также усилит защиту P2P сети Monero от DDoS-атак и разделения.</li>
<li><strong>Открытый интерфейс кошелька (RPC)</strong> позволяет любому пользователю подключить свои кошельки к сети Monero через ваш узел. Это полезно для новичков, которые еще не успели создать своих собственных узлов.</li>
<li><strong>Сервис Tor Onion для интерфейса кошелька</strong> полезен для пользователей кошельков, подсоединяющихся через Tor, поскольку он смягчает риски проведения «атаки посредника» (MiTM) на выходные узлы Tor (которые вполне реальны). После подключения кошелька к «луковому» сервису проведение MiTM атаки не представляется реальным, поскольку в сети Tor применяется сквозная TLS защита соединений.</li>
<li><strong>Сервис Tor Onion для P2P сети</strong> полезен для других пользователей полных узлов, поскольку он позволяет им транслировать транзакции по сети Tor (при помощи опции &ndash;tx-proxy).</li>
</ul>
<h2 id="_возможные-предпосылки-для-создания-узла_"><em>Возможные предпосылки для создания узла​</em></h2>
<p>Вы разбираетесь в администрировании Linux на базовом уровне. Вы ищете конкретное руководство Monero.</p>
<p>У вас есть администраторский доступ к серверу Linux с оперативной памятью 2 Гб и 120 Гб SSD (или 50 Гб для обрезанной версии узла). Эта информация актуальна на январь 2021.</p>
<p>Некоторые команды предназначены для Ubuntu, но вы легко переведёте их для используемого вами дистрибутива.</p>
<h2 id="_установка-tor_"><em>Установка Tor​</em></h2>
<p><a href="https://2019.www.torproject.org/docs/debian.html.en#ubuntu">Установите Tor</a>.</p>
<p>Измените <code>/etc/tor/torrc</code>, как показано ниже.</p>
<p>Включите сервис Tor при помощи команды systemctl enable tor и перезапустите его посредством команды systemctl restart tor.</p>
<p>Убедитесь в том, что Tor работает, используя команду systemctl status tor@default.</p>
<p>Новый луковый адрес и соответствующая пара ключей создаются демоном tor в директории /var/lib/tor/monero/. Возможно, вы захотите произвести резервное копирование, чтобы безопасно контролировать свой &ldquo;луковый&rdquo; адрес. Такое копирование происходит при каждой перезагрузке, когда вы добавляете новую HiddenServiceDir в конфигурацию torrc.</p>
<p>На данный момент необходимость в самом демоне Monero отсутствует. «Луковые» сервисы (также известные как «скрытые сервисы») просто будут ожидать, пока monerod локального хоста не появится на указанных портах 18081 и 18083.</p>
<blockquote>
<p><em><strong>Как работают «луковые» сервисы Tor?</strong></em></p>
<p>Демон tor просто переносит трафик с виртуального «лукового» порта на фактический порт локального хоста, где какая-нибудь служба перехватит его (в нашем случае это будет monerod).<br>
По одному «луковому» адресу может находиться множество сервисов на различных виртуальных портах. Мы воспользуемся этой возможностью, чтобы иметь P2P и RPC сервисы monerod по одному «луковому» адресу. Вы можете создать любое количество «луковых» адресов на одном сервере или по одному IP-адресу, но в данном случае в этом нет необходимости.</p>
</blockquote>
<h3 id="_etctortorrc_"><em>/etc/tor/torrc</em></h3>
<pre tabindex="0"><code>HiddenServiceDir/var/lib/tor/monero
HiddenServicePort 18081 127.0.0.1:18081    # интерфейс для кошелька (RPC)
HiddenServicePort 18083 127.0.0.1:18083    # интерфейс для P2P сети
</code></pre><h2 id="_установка-monero_"><em>Установка Monero​</em></h2>
<p>Создайте пользователя monero и группу <code>useradd --system monero</code>.</p>
<p>Создайте директорию <strong>binaries</strong> Monero (пока она будет пустой) <code>mkdir -p /opt/monero</code> и <code>chown -R monero:monero /opt/monero</code>.</p>
<p>Создайте директорию <strong>data</strong> <code>Monero mkdir -p /srv/monero</code> и <code>chown -R monero:monero /srv/monero</code>.</p>
<p>Создайте директорию <strong>log</strong> <code>Monero mkdir -p /var/log/monero</code> и <code>chown -R monero:monero /var/log/monero</code>.</p>
<p>Вы можете без проблем изменить название вышеуказанных директорий в соответствии с вашими предпочтениями, но не забудьте после этого исправить путь.</p>
<p><a href="https://markdownlivepreview.com/interacting/download-monero-binaries/">Скачайте</a> и <a href="https://markdownlivepreview.com/interacting/verify-monero-binaries/">проверьте</a> файл.</p>
<p>Извлеките <code>tar -xf monero-linux-x64-v0.17.1.9.tar.bz2</code> (измените имя файла соответствующим образом).</p>
<p>Переместите двоичные файлы в директорию /opt/monero/, используя <code>mv monero-x86_64-linux-gnu-v0.17.1.9/* /opt/monero/</code>, а затем <code>chown -R monero:monero /opt/monero</code>.</p>
<p>Создайте <code>/etc/monero.conf</code>, как показано ниже и вставьте необходимые значения в соответствующие поля.</p>
<p>Создайте <code>/etc/systemd/system/monero.service</code>, как показано ниже.</p>
<p>Используя команду <code>systemctl enable monero</code> включите сервис Monero и перезапустите его командой <code>systemctl restart monero</code>.</p>
<p>Проверьте, включился ли сервис, при помощи команды <code>systemctl status monero</code>.</p>
<p>Проверьте, работает ли он надлежащим образом, используя <code>tail -n100 /var/log/monero/monero.log</code>.</p>
<h3 id="_etcmoneroconf_"><em>/etc/monero.conf​</em></h3>
<p>Это просто пример возможной конфигурации, и он ни в коем случае не является обязательным для реализации. Вы вольны вносить изменения. См. <a href="https://markdownlivepreview.com/interacting/monerod-reference">monerod reference</a>.</p>
<p>Если вы изменили путь, внесите соответствующие корректировки.</p>
<p>Выведите ваш «луковый» адрес на экран, используя <code>cat /var/lib/tor/monero/hostname</code>, и вставьте его в поле опции anonymous-inbound.</p>
<pre tabindex="0"><code># /etc/monero.conf
#
# Конфигурационный файл для monerod. Все доступные опции можно найти в MoneroDocs:
# https://monerodocs.org/interacting/monerod-reference/

# Директория данных (база данных блокчейна и индексы)
data-dir=/srv/monero

# Опциональное обрезание
# prune-blockchain=1           # Обрезание позволяет сэкономить до 2/3 дискового пространства без ущерба для функциональности, но вклад в работу сети будет меньшим
# sync-pruned-blocks=1         # Позволяет скачать уже обрезанные блоки вместо того, чтобы обрезать их самостоятельно

check-updates=disabled         # Отключает проверку записей DNS TXT на наличие новой версии

# Регистрационный файл
log-file=/var/log/monero/monero.log
log-level=0                    # Минимальная запись БЕЗ РЕГИСТРАЦИИ подсоединяющихся одноранговых узлов или кошельков
max-log-file-size=2147483648   # Устанавливается значение 2 Гб, что позволяет избежать обрезания журнала демоном monerod; вместо этого следует конфигурировать logrotate

# Полный P2P узел
p2p-bind-ip=0.0.0.0            # Привязка ко всем интерфейсам (по умолчанию)
p2p-bind-port=18080            # Привязка к порту, используемому по умолчанию

# Открытый RPC узел
public-node=1                  # Предложение другим пользователям воспользоваться данным узлом в качестве удалённого для подсоединения их кошельков
confirm-external-bind=1        # Открыть узел (подтверждение)
rpc-bind-ip=0.0.0.0            # Привязка ко всем интерфейсам (для открытого узла)
rpc-bind-port=18081            # Привязка к порту, используемому по умолчанию (для открытого узла)
restricted-rpc=1               # Обязательно для интерфейса открытого узла
no-igd=1                       # Отключение распределение портов UPnP
no-zmq=1                       # Отключение ZMQ RPC сервера с целью сокращения поверхности атаки (не используется)

# RPC TLS
rpc-ssl=autodetect             # Использовать TLS, если клиент кошелька поддерживает этот протокол (задаётся по умолчанию); сертификат будет генерироваться каждый раз на ходу при каждом перезапуске

# Размер пула памяти
max-txpool-weight=268435456    # Максимальный размер пула неподтверждённых транзакций в байтах (в данном случае 256 Мб, по умолчанию составляет ~618 Мб)

# Медленная, но надёжная запись в базу данных
db-sync-mode=safe

out-peers=64              # Обеспечивает значительно более быструю синхронизацию и передачу информации о транзакциях; используемое сегодня значение, равное 8, является недостаточным
n-peers=64               # По умолчанию значение не ограничено; здесь мы предпочитаем задавать верхний предел

limit-rate-up=1048576     # 1048576 КБ/с == 1 Гб/с; увеличение значения, используемого по умолчанию (2048 КБ/с); улучшение работы p2p сети
limit-rate-down=1048576   # 1048576 КБ/с == 1 Гб/с; увеличение значения, используемого по умолчанию (8192 КБ/с; служит для ускорения начальной синхронизации

# Tor: трансляция транзакций, сгенерированных подключёнными кошельками по сети Tor (не касается ретранслируемых транзакций)
tx-proxy=tor,127.0.0.1:9050,16

# Tor: добавление сид-узла P2P в сеть Tor
add-peer=moneroxmrxw44lku6qniyarpwgznpcwml4drq7vb24ppatlcg4kmxpqd.onion:18080
add-peer=monerozf6koypqrt.onion:18080
add-peer=zbjkbsxc5munw3qusl7j2hpcmikhqocdf4pqhnhtpzw5nt5jrmofptid.onion:18083 # https://github.com/monero-project/monero/blob/master/src/p2p/net_node.inl
add-peer=rno75kjcw3ein6i446sqby2xkyqjarb75oq36ah6c2mribyklzhurpyd.onion:28083        # Согласно Reddit, это основная сеть, несмотря на странное обозначение порта
add-peer=sqzrokz36lgkng2i2nlzgzns2ugcxqosflygsxbkybb4xn6gq3ouugqd.onion:18083        # очень капризная опция, работает в 1 случае из 3

# Tor: указание своего «лукового» адреса для monerod с целью его дальнейшей публикации в P2P сети
anonymous-inbound=PASTE_YOUR_ONION_HOSTNAME:18083,127.0.0.1:18083,64

# Tor: будьте снисходительны к подключающимся кошелькам; рекомендуется http://xmrguide42y34onq.onion/remote_nodes
disable-rpc-ban=1
</code></pre><h3 id="_etcmoneroservice_"><em>/etc/&hellip;/monero.service</em></h3>
<pre tabindex="0"><code># /etc/systemd/system/monero.service

[Unit]
Description=Monero Daemon
After=network.target
Wants=network.target

[Service]
ExecStart=/opt/monero/monerod --detach --config-file /etc/monero.conf --pidfile /run/monero/monerod.pid
ExecStartPost=/bin/sleep 0.1
Type=forking
PIDFile=/run/monero/monerod.pid

Restart=always
RestartSec=16

User=monero
Group=monero
RuntimeDirectory=monero

StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
</code></pre><h2 id="_открытие-портов-брандмауэра_"><em>Открытие портов брандмауэра​</em></h2>
<p>Если вы используете брандмауэр (а его следует использовать), откройте порты 18080 и 18081 для входящих TCP соединений. Это для входящих клирнет соединений, P2P и RPC соответственно.</p>
<p>Вам <strong>не нужно</strong> открывать каких-либо портов для Tor. «Луковые» сервисы работают с виртуальными портами. Демон tor не принимает входящие соединения напрямую, поэтому ему не нужны открытые порты.</p>
<p>Например, в случае с популярным брандмауэром UFW это делается следующим образом:</p>
<pre tabindex="0"><code>ufw allow 18080/tcp
ufw allow 18081/tcp
</code></pre><p>Для проверки используйте команду <code>ufw status</code>. Результат должен быть похож на приводимый ниже (порт 22, используемый SSH по умолчанию, не связан с Monero):</p>
<pre tabindex="0"><code>To                         Action      From
--                         ------      ----
22/tcp                     LIMIT       Anywhere             
18080/tcp                  ALLOW       Anywhere             
18081/tcp                  ALLOW       Anywhere             
22/tcp (v6)                LIMIT       Anywhere (v6)         
18080/tcp (v6)             ALLOW       Anywhere (v6)         
18081/tcp (v6)             ALLOW       Anywhere (v6)   
</code></pre><h2 id="_тестирование_"><em>Тестирование​</em></h2>
<h3 id="_на-сервере_"><em>На сервере​</em></h3>
<p>Перечислите все службы, отслеживающие порты, и убедитесь в том, что именно то, что и ожидается:</p>
<pre tabindex="0"><code>sudo netstat -lntpu
</code></pre><p>Результат должен содержать следующее (в любом порядке); очевидно, что значения PID будут отличаться.</p>
<pre tabindex="0"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name

...
tcp        0      0 0.0.0.0:18080           0.0.0.0:*               LISTEN      259255/monerod
tcp        0      0 0.0.0.0:18081           0.0.0.0:*               LISTEN      259255/monerod
tcp        0      0 127.0.0.1:18083         0.0.0.0:*               LISTEN      259255/monerod
tcp        0      0 127.0.0.1:9050          0.0.0.0:*               LISTEN      258786/tor          
</code></pre><h3 id="_на-клиентской-машине_"><em>На клиентской машине​</em></h3>
<p>Наконец, настала пора протестировать соединения с вашей клиентской машины.</p>
<p>Установите tor и torsocks на свой ноутбук. Они всё равно вам понадобятся для кошелька Monero.</p>
<p>Исключительно для тестирования вам также понадобятся nmap и proxychains.</p>
<p>Протестируйте <strong>клирнет P2P</strong> соединение:</p>
<pre tabindex="0"><code>nmap -Pn -p 18080 YOUR_IP_ADDRESS_HERE
</code></pre><p>Протестируйте <strong>клирнет RPC</strong> соединение:</p>
<pre tabindex="0"><code>curl --digest -X POST http://YOUR_IP_ADDRESS_HERE:18081/json_rpc -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;0&quot;,&quot;method&quot;:&quot;get_info&quot;}' -H 'Content-Type: application/json'
</code></pre><p>Протестируйте <strong>«луковое» P2P</strong> соединение (пропустите, если у вас нет proxychains):</p>
<pre tabindex="0"><code>proxychains nmap -Pn -p 18083 YOUR_ONION_ADDRESS_HERE.onion
</code></pre><p>Протестируйте <strong>«луковое» RPC</strong> соединение:</p>
<pre tabindex="0"><code>torsocks curl --digest -X POST http://YOUR_IP_ADDRESS_HERE:18081/json_rpc -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;0&quot;,&quot;method&quot;:&quot;get_info&quot;}' -H 'Content-Type: application/json'
</code></pre><h2 id="_отладка_"><em>Отладка​</em></h2>
<h3 id="_tor_"><em>Tor</em></h3>
<ul>
<li>Состояние: <code>systemctl status tor@default</code></li>
<li>Записи в файле регистрации: <code>journalctl -xe --unit tor@default</code></li>
</ul>
<h3 id="_monero_"><em>Monero:</em></h3>
<ul>
<li>Состояние: <code>systemctl status monero</code></li>
<li>Записи в файле регистрации: <code>tail -n100 /var/log/monero/monero.log</code></li>
<li>Дополнительная информация в файле регистрации: измените <code>log-level=0</code> на <code>log-level=1</code> в файле<code> monero.conf</code> (не забудьте вернуть всё, как было, после того, как закончите).</li>
</ul>
<h2 id="_дальнейшие-улучшения_"><em>Дальнейшие улучшения​</em></h2>
<h3 id="_периодические-перезапуски_"><em>Периодические перезапуски</em></h3>
<p>Вероятно, стоит добавить опцию периодического автоматического перезапуска tor и monerod каждые пару часов. Ни один из демонов не идеален; они могут зависать или им может не хватать памяти в критических ситуациях, например, как при недавних атаках на Tor v3 или DDoS атаках на сеть Monero. Одним из возможных способов реализации такой опции является использование таймеров systemd.</p>

		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/manual/hosting-p2p-monero-nodes-on-i2p/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Назад</span>
			<p class="pager__title">Хостинг p2p узла Monero в I2P</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/manual/monerujo-wallet-android-user-guide/" rel="next">
			<span class="pager__subtitle">Вперед&thinsp;»</span>
			<p class="pager__title">Руководство пользователя мобильного кошелька Monerujo (Android)</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Недавние публикации</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/post/2021-12-06-vulnerability-multisig/">В коде multisig-кошелька Monero обнаружена ошибка</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-12-04-monero-gui-0.17.3.0-released/">Доработанная версия Monero GUI 0.17.3.0 Oxygen Orion</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-12-04-monero-0.17.3.0-released/">Доработанная промежуточная версия Monero 0.17.3.0 Oxygen Orion</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-11-19-kraken-delist-monero-for-uk-customers/">Kraken планирует исключить Monero из списка поддерживаемых в Великобритании валют уже к концу ноября</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2021-11-05-p2pool-1.3.1-released/">Релиз P2Pool v1.3.1</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Категории</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB-%D0%B2%D1%81%D1%82%D1%80%D0%B5%D1%87%D0%B8/">Журнал встречи</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D0%BD%D0%BE%D0%B2%D0%BE%D1%81%D1%82%D0%B8/">Новости</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B0/">Руководства</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8/">Статьи</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Теги</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/breaking-monero/" title="Breaking Monero">Breaking Monero</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/cake-wallet/" title="Cake Wallet">Cake Wallet</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/ccs/" title="CCS">CCS</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/cdc-36c3/" title="CDC 36c3">CDC 36c3</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/ciphertrace/" title="CipherTrace">CipherTrace</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/def-con-2021/" title="DEF CON 2021">DEF CON 2021</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/farcaster/" title="Farcaster">Farcaster</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/feather-wallet/" title="Feather Wallet">Feather Wallet</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/haveno/" title="Haveno">Haveno</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/konferenco/" title="Konferenco">Konferenco</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/monero-gui/" title="Monero GUI">Monero GUI</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/monero-outreach/" title="Monero Outreach">Monero Outreach</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/monerujo/" title="Monerujo">Monerujo</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/mpwg/" title="MPWG">MPWG</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/p2pool/" title="P2Pool">P2Pool</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B0%D1%82%D0%BE%D0%BC%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D1%81%D0%B2%D0%BE%D0%BF%D1%8B/" title="Атомарные свопы">Атомарные свопы</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B2%D0%B7%D0%BB%D0%BE%D0%BC/" title="Взлом">Взлом</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B2%D0%B8%D1%80%D1%83%D1%81/" title="Вирус">Вирус</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB-%D0%B2%D1%81%D1%82%D1%80%D0%B5%D1%87%D0%B8/" title="Журнал встречи">Журнал встречи</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%BD%D0%B0%D1%83%D1%87%D0%BD%D0%BE-%D1%84%D0%B0%D0%BD%D1%82%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9-%D1%80%D0%B0%D1%81%D1%81%D0%BA%D0%B0%D0%B7/" title="Научно-фантастический рассказ">Научно-фантастический рассказ</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0/" title="Ошибка">Ошибка</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 .
			<span class="footer__copyright-credits">Информационно-новостной сайт русскоязычного сообщества Monero. <a href="/services/#_поддержать-xmrru_" rel="nofollow noopener" target="_blank">Пожертвовать</a>  на развитие проекта XMR.RU.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="/js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>